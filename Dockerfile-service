FROM openjdk:8-jre-slim
WORKDIR /usr/src/app
COPY service_python ./
RUN apt update
RUN apt install build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev wget curl -y
RUN curl -O https://www.python.org/ftp/python/3.7.3/Python-3.7.3.tar.xz
RUN tar -xf Python-3.7.3.tar.xz
WORKDIR /Python-3.7.3
RUN ./configure --enable-optimizations
RUN make altinstall
apt-get install -y python3.7-dev
RUN pip install --no-cache-dir -r requirements.txt
RUN pip3 install --no-cache-dir JPype1==0.6.3 --force-reinstall
CMD ["python3.7", "-u", "init.py", "prod"]